<h2>Mes élèves</h2>
<div class="row">
  <div class="col-6">
    <table class="table table-striped table-hover">
      <thead>
        <th scope="col">Nom</th>
        <th scope="col">Prénom</th>
      </thead>
      <tbody>
        <tr
          scope="row"
          *ngFor="let eleve of (eleves | keyvalue)"
          (click)="eleveToDisplay = eleve.value"
          style="cursor: pointer"
        >
          <td>{{ eleve.key }} {{ eleve.value.nom | uppercase }}</td>
          <td>{{ eleve.value.prenom | lowercase }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-6">
    <div *ngIf="eleveToDisplay" [hidden]="!eleveToDisplay">
      <h3>Elève sélectionné</h3>
      <table class="table table-dark">
        <tbody>
          <tr class="bg-danger">
            {{
              mineur(eleveToDisplay.age)
            }}
          </tr>
          <tr>
            {{
              eleveToDisplay.nom
            }}
          </tr>
          <tr>
            {{
              eleveToDisplay.prenom
            }}
          </tr>
          <tr>
            {{
              eleveToDisplay.email
            }}
          </tr>
          <tr>
            {{
              eleveToDisplay.nomDeClasse
            }}
          </tr>
          <tr>
            {{
              eleveToDisplay.filiere
            }}
          </tr>
          <tr>
            {{
              eleveToDisplay.age | number: ".2"
            }}
          </tr>
          <tr>
            {{
              eleveToDisplay.description
            }}
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-1"></div>
  <form class="col-10 card" (ngSubmit)="addEleve()" [formGroup]="eleveForm">
    <div class="card-header col-12"><h4>Ajouter un élève</h4></div>
    <div class="row">
      <div class="form-group col-4">
        <label>Nom</label>
        <input
          class="form-control"
          formControlName="nom"
        />
        <div *ngIf="nomCtl.touched && nomCtl.hasError('required')">
          Le nom est obligatoire
        </div>
        <div *ngIf="nomCtl.touched && nomCtl.hasError('maxlength')">
          Le nom ne doit pas dépasser 25 caractères
        </div>
      </div>
      <div class="form-group col-4">
        <label>Prénom</label>
        <input
          class="form-control"
          formControlName="prenom"
        />
        <div *ngIf="prenomCtl.touched && prenomCtl.hasError('required')">
          Le prénom est obligatoire
        </div>
        <div *ngIf="prenomCtl.touched && prenomCtl.hasError('maxlength')">
          Le prénom ne doit pas dépasser 25 caractères
        </div>
      </div>
      <div class="form-group col-4">
        <label>Âge</label>
        <input
          class="form-control"
          formControlName="age"
        />
        <div *ngIf="ageCtl.touched && ageCtl.hasError('required')">
          L'âge est obligatoire
        </div>
        <div *ngIf="ageCtl.touched && ageCtl.hasError('pattern')">
          L'âge n'est pas un nombre
        </div>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-4">
        <label>Email</label>
        <input
          class="form-control"
          formControlName="email"
        />
        <div *ngIf="emailCtl.touched && emailCtl.hasError('pattern')">
            L'email é mal ékri
          </div>
      </div>
      <div class="form-group col-4">
        <label>Nom de classe</label>
        <input
          class="form-control"
          formControlName="nomDeClasse"
        />
      </div>
      <div class="form-group col-4">
        <label>Filière</label>
        <input
          class="form-control"
          formControlName="filiere"
        />
      </div>
    </div>

    <div class="form-group">
      <label>Description</label>
      <input
        class="form-control"
        formControlName="description"
      />
    </div>
    <button
      class="btn btn-primary"
      type="submit"
      [disabled]="eleveForm.invalid"
    >
      Créer l'élève
    </button>
  </form>
  <div class="col-1"></div>
</div>
